<!DOCTYPE html>
<html>
<head>
<title>Transport Services | Campus Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family:'Inter',sans-serif;
    background:linear-gradient(135deg,#eef2ff,#f8fafc);
    min-height:100vh;
    color:#1e293b;
}

/* NAVBAR */
.navbar{
    background:rgba(30,58,138,0.9);
    backdrop-filter:blur(10px);
    color:white;
    padding:18px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    position:sticky;
    top:0;
    z-index:100;
}

.navbar h2{
    font-size:18px;
    font-weight:600;
}

.navbar a{
    color:white;
    text-decoration:none;
    font-size:14px;
    opacity:0.9;
    transition:0.3s;
}

.navbar a:hover{
    opacity:1;
}

/* CONTAINER */
.container{
    max-width:1100px;
    margin:60px auto;
    padding:0 20px;
}

/* HEADER */
.header{
    text-align:center;
    margin-bottom:50px;
}

.header h1{
    font-size:32px;
    margin-bottom:10px;
}

.header p{
    color:#64748b;
}

/* GRID */
.grid{
    display:grid;
    grid-template-columns:1.2fr 1fr;
    gap:35px;
}

/* CARD */
.card{
    background:rgba(255,255,255,0.85);
    backdrop-filter:blur(15px);
    padding:30px;
    border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,0.08);
    transition:0.3s;
}

.card:hover{
    transform:translateY(-5px);
}

/* PREVIEW */
.preview-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
    margin-top:20px;
}

.preview-item{
    background:#f1f5f9;
    padding:12px;
    border-radius:10px;
    font-size:14px;
}

/* PAYMENT CARD */
.payment{
    text-align:center;
    background:linear-gradient(135deg,#2563eb,#1e40af);
    color:white;
}

.payment h1{
    font-size:40px;
    margin:15px 0;
}

/* BUTTON */
.pay-btn{
    background:white;
    color:#1e3a8a;
    padding:14px 30px;
    border:none;
    border-radius:10px;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
    box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

.pay-btn:hover{
    transform:scale(1.05);
}

.download-btn{
    display:none;
    margin-top:20px;
    background:#16a34a;
    color:white;
    padding:12px 25px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    transition:0.3s;
}

.download-btn:hover{
    transform:scale(1.05);
}

/* SUCCESS MESSAGE */
.success{
    display:none;
    margin-top:20px;
    padding:12px;
    border-radius:10px;
    background:#dcfce7;
    color:#166534;
    animation:fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn{
    from{opacity:0;transform:translateY(10px);}
    to{opacity:1;transform:translateY(0);}
}

/* INSTRUCTIONS */
.instructions{
    margin-top:50px;
}

.instructions ul{
    margin-top:15px;
    line-height:1.8;
    color:#475569;
}

/* RESPONSIVE */
@media(max-width:900px){
    .grid{
        grid-template-columns:1fr;
    }
    .preview-grid{
        grid-template-columns:1fr;
    }
    .header h1{
        font-size:24px;
    }
}
</style>
</head>

<body>

<div class="navbar">
    <h2>üéì Campus Assistant</h2>
    <a href="/dashboard">‚Üê Back to Dashboard</a>
</div>

<div class="container">

<div class="header">
    <h1>üöå Student Transport Concession</h1>
    <p>Secure digital access to official BEST concession form</p>
</div>

<div class="grid">

    <!-- PREVIEW -->
    <div class="card">
        <h3>Form Preview</h3>

        <div class="preview-grid">
            <div class="preview-item"><strong>Name:</strong> Student Name</div>
            <div class="preview-item"><strong>Class:</strong> FYJC</div>
            <div class="preview-item"><strong>DOB:</strong> --/--/----</div>
            <div class="preview-item"><strong>Residence:</strong> City</div>
            <div class="preview-item"><strong>Destination:</strong> College Area</div>
            <div class="preview-item"><strong>College:</strong> Your College</div>
        </div>

        <div class="success" id="successBox">
            ‚úÖ Payment successful. Download unlocked!
        </div>
    </div>

    <!-- PAYMENT -->
    <div class="card payment">
        <h3>Processing Fee</h3>
        <h1>‚Çπ5</h1>
        <p>Secure Razorpay checkout</p>

        <button class="pay-btn" onclick="payNow()">Pay Now</button>

        <a href="/Student_concession_form.pdf" download>
            <button class="download-btn" id="downloadBtn">
                Download Form
            </button>
        </a>
    </div>

</div>

<div class="card instructions">
    <h3>üìå Instructions</h3>
    <ul>
        <li>Fill in CAPITAL letters.</li>
        <li>Attach passport-size photo.</li>
        <li>Get Principal signature & stamp.</li>
        <li>Submit at nearest BEST depot.</li>
    </ul>
</div>

</div>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
async function payNow() {
    try {
            const response = await fetch("/create-order", {
            method: "POST"
            });

        const order = await response.json();

        const options = {
            key: "<%= razorpayKey %>",
            amount: order.amount,
            currency: "INR",
            name: "Campus Assistant",
            description: "Bus Concession Fee",
            order_id: order.id,
            handler: function () {
                document.getElementById("downloadBtn").style.display = "inline-block";
                document.getElementById("successBox").style.display = "block";
            },
            theme: {
                color: "#2563eb"
            }
        };

        const rzp = new Razorpay(options);
        rzp.open();

    } catch (err) {
        console.error(err);
        alert("Payment failed. Try again.");
    }
}
</script>

</body>
</html>