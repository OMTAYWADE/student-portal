<!DOCTYPE html>
<html>

<head>
    <title>Campus Assistant | Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #eef2ff, #f8fafc);
            color: #0f172a;
            min-height: 100vh;
        }

        /* Layout */
        .wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background: #0f172a;
            color: white;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .sidebar h2 {
            font-size: 18px;
            margin-bottom: 30px;
        }

        .sidebar a {
            display: block;
            color: #cbd5e1;
            text-decoration: none;
            margin-bottom: 15px;
            font-size: 14px;
            transition: 0.2s;
        }

        .sidebar a:hover {
            color: white;
            transform: translateX(4px);
        }

        /* Main */
        .main {
            flex: 1;
            padding: 50px;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .topbar h1 {
            font-size: 26px;
        }

        .profile img {
            width: 42px;
            height: 42px;
            border-radius: 50%;
        }

        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Cards */
        .card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
            transition: 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 8px;
        }

        .card p {
            font-size: 28px;
            font-weight: 600;
        }

        /* Gradient accent */
        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #22c55e);
        }

        /* Progress bar */
        .progress-wrap {
            margin-top: 12px;
            height: 8px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 8px;
            width: 0%;
            background: linear-gradient(90deg, #6366f1, #22c55e);
            transition: width 1s ease;
        }

        /* Alert */
        .alert {
            background: #fee2e2;
            color: #b91c1c;
            padding: 15px;
            border-radius: 14px;
            margin-bottom: 30px;
            font-size: 14px;
        }

        /* Quick Actions */
        .actions {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .actions a {
            flex: 1;
            text-align: center;
            padding: 14px;
            border-radius: 14px;
            background: linear-gradient(90deg, #6366f1, #4f46e5);
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: 0.3s;
        }

        .actions a:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.4);
        }

        /* Responsive */
        @media(max-width:900px) {
            .wrapper {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
            }

            .main {
                padding: 30px 20px;
            }
        }
    </style>
</head>

<body>

    <div class="wrapper">

        <!-- Sidebar -->
        <div class="sidebar">
            <div>
                <h2>ðŸŽ“ Campus Assistant</h2>
                <a href="/dashboard">Dashboard</a>
                <a href="/assignNotification">Assignments</a>
                <a href="/allcourses">Courses</a>
                <a href="/results">Results</a>
            </div>
            <a href="/logout">Logout</a>
        </div>

        <!-- Main -->
        <div class="main">

            <div class="topbar">
                <h1>Welcome, <%= user.displayName %> ðŸ‘‹</h1>
                <div class="profile">
                    <img src="<%= user.photos?.[0]?.value || 'https://via.placeholder.com/40' %>">
                </div>
            </div>

            <% if(totalKT> 0){ %>
                <div class="alert">
                    âš  You currently have <strong>
                        <%= totalKT %>
                    </strong> active KT subjects.
                </div>
                <% } %>

                    <!-- Academic Overview -->
                    <div class="grid">

                        <div class="card">
                            <h3>CGPA</h3>
                            <p class="counter" data-target="<%= cgpa || 0 %>">0</p>
                        </div>

                        <div class="card">
                            <h3>Latest SGPA</h3>
                            <p class="counter" data-target="<%= latestSGPA || 0 %>">0</p>
                        </div>

                        <div class="card">
                            <h3>Total KT</h3>
                            <p class="counter" data-target="<%= totalKT %>">0</p>
                        </div>

                    </div>

                    <!-- Productivity -->
                    <div class="grid">

                        <div class="card">
                            <h3>Total Tasks</h3>
                            <p class="counter" data-target="<%= total %>">0</p>
                        </div>

                        <div class="card">
                            <h3>Completed</h3>
                            <p class="counter" data-target="<%= completed %>">0</p>
                        </div>

                        <div class="card">
                            <h3>Pending</h3>
                            <p class="counter" data-target="<%= pending %>">0</p>
                        </div>

                        <div class="card">
                            <h3>Productivity</h3>
                            <p>
                                <%= progress %>%
                            </p>
                            <div class="progress-wrap">
                                <div class="progress-bar" id="progressBar"></div>
                            </div>
                        </div>

                    </div>

                    <!-- Quick Actions -->
                    <div class="actions">
                        <a href="/assignNotification">ðŸ“‹ View Assignments</a>
                        <a href="/allcourses">ðŸ“š View Courses</a>
                        <a href="/results">ðŸ“Š View Results</a>
                    </div>

     </div>
    </div>

    <script>

        /* Animated Counters */
        document.querySelectorAll(".counter").forEach(counter => {
            const target = +counter.dataset.target;
            let count = 0;
            const speed = target / 30;

            const update = () => {
                if (count < target) {
                    count += speed;
                    counter.innerText = Math.floor(count);
                    requestAnimationFrame(update);
                } else {
                    counter.innerText = target;
                }
            };

            update();
        });

        /* Animate Progress Bar */
        document.addEventListener("DOMContentLoaded", () => {
            const progress = <%= progress %>;
            document.getElementById("progressBar").style.width = progress + "%";
        });

    </script>

</body>

</html>